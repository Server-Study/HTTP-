# 1장 정리

## HTTP 설명
- 얼마나 많은 클라이언트와 서버가 통신하는지
- 리소스가 어디서 오는지
- 웹 트랜잭션이 어떻게 동작하는지
- HTTP 통신을 위해 사용하는 메시지의 형식
- HTTP 기저의 TCP 네트워크 전송
- 여러 종류의 HTTP 프로토콜
- 인터넷 곳곳에 설치된 다양한 HTTP 구성요소

## HTTP
- 전 세계의 웹서버로부 이 대량의 정보를 빠르고, 간편하고, 정확하게 사람들의 PC에 설치된 브라우저로 옮겨준다.
- 신뢰성 있는 데이터 전송 프로토콜을 사용
- 데이터가 지구 반대편에서 오더라도 전송 중 손상되거나 꼬이지 않음을 보장(TCP)
- HTTP 통신이 전송 중 파괴되거나, 중복되거나, 왜곡되는 것을 걱정하지 않아도 된다.

## 웹 클라이언트와 서버
- 웹 콘텐츠
    - 웹서버에 존재한다.
- 웹 서버
    - HTTP 프로토콜로 의사소통하기 때문에 보통 HTTP 서버라고 불린다.
    - 인터넷의 데이터를 정하고, HTTP 클라이언트가 요청한 데이터를 제공한다.
    - 클라언트는 서버에게 HTTP 요청을 보내고 서버는 요청된 데이터를 HTTP응답으로 돌려준다.
- HTTP 클라이언트와 HTTP 서버는 월드 와이드 웹의 기본 요소이다.

## 리소스
- 웹 서버는 웹 리소스를 관리하고 제공한다.
- 웹 리소스는 웹 콘텐츠의 원천이다.
- 웹 리소스는 정적 콘텐츠와 동적 콘텐츠로 나뉜다.
- 정적 콘텐츠 리소스
    - 텍스트 파일, HTML 파일, 마이크로소프트 워드 파일, 어도비 아크로뱃 파일, JPEG 이미지 파일, AVI 동영상 파일, 그 외 모든 종류의 파일
- 동적 콘텐츠 리소스
    - 요청에 따라 콘텐츠를 생산할 수도 있다.
    - 사용자가 누구인지, 어떤 정보를 요청했는지, 몇 시인지 따라 다른 콘텐츠를 생성
    - ex) 카메라 라이브 영상, 주식 거래, 부동산 데이터베이스 검색, 온라인 쇼핑몰에서 선물 구입 등
- 어떤 종류의 콘텐츠 소스도 리소스가 될 수 있다.
    - ex) 기업 판매 예측 스프레시트 파일, 지역 공공 도서관 서가를 탐색하는 웹 게이트웨이, 인터넷 검색 엔진 등

## 미디어 타입
- 인터넷은 수천 가지 데이터 타입을 다루기 때문에, HTTP는 웹에서 전송되는 개체 각각에 신중하게 MIME 타입이라는 데이터 포맷 라벨을 붙인다.
- MIME은 원래 각기 다른 전자메일 시스템 사이에서 메시지가 오갈 때 겪는 문제점을 해결하기 위해 설계 되었다.
- 웹 서버는 모든 HTTP 객체 데이터에 MIME 타입을 붙인다.
- 웹브라우저는 서버로부터 객체를 돌려받을 때, 다룰 수 있는 객체인지 MIME 타입을 통해 확인한다.
- MIME 타입은 사선(/)으로 구분된 주 타입과 부 타입으로 이루어진 문자열 라벨이다.

## URI
- 웹 서버 리소스는 각자 이름을 갖고 있기 때문에, 클라이언트는 관심 있는 리소스를 지목할 수 있다.
- 서버 리소스 이름은 통합 자원 식별자, 혹은 URI로 불린다.
- URI는 인터넷의 우편물 주소 같은 것으로, 정보 리소스를 고유하게 식별하고 위치를 지정할 수 있다.
- HTTP는 주어진 URI로 객체를 찾아온다. URI에는 두가자가 있는데, URL과 URN이라는 것이다.

## URL
- 통합 자원 지시자라고 불린다.
- URL은 특정 서버의 한 리소스에 대한 구체적인 위치를 서술한다.
- URL은 리소스가 정확히 어디에 있고 어떻게 접근할 수 있는지 분명히 알려준다.
- URL의 첫 번째 부분은 스킴이라고 불리는데, 리소스에 접근하기 위해 사용되는 프로토콜을 서술한다.
- 두 번째 부분은 서버의 인터넷 주소를 제공한다.
- 마지막은 웹 서버의 리소스를 가리킨다.

## URN
- 통합 자원 이름이다.
- URN은 콘텐츠를 이루는 한 리소스에 대해, 그 리소스의 위치에 영향 받지 않는 유일무이한 이름 역할을 한다.
- 이 위치 독립적인 URN은 리소스를 여기저기로 옮기더라도 문제없이 동작한다.
- 리소스가 그 이름을 변하지 않게 유지하는 한, 여러 종류의 네트워크 접속 프로토콜로 접근해도 문제 없다.

## 트랜잭션
- HTTP 트랜잭션은 요청 명령과 응답 결과로 구성되어 있다.
- HTTP 메시지라고 불리는 정형화된 데이터 덩어리를 이용해 이루어 진다.

## 메서드
- HTTP는 HTTP 메서드라고 불리는 여러 가지 종류의 요청 명령을 지원한다.
- 메서드는 서버에게 어떤 동작이 취해져야 하는지 말해준다.

## 상태 코드
- 모든 HTTP 응답 메시지는 상태 코드와 함께 반환된다.
- 상태 코드는 클라이언트에게 요청이 성공했는지 아니면 추가 조치가 필요한지 알려주는 세 자리 숫자다.

## 웹페이지는 여러 객체로 이루어질 수 있다.
- 애플리케이션은 보통은 하나의 작업을 수행하기 위해 여러 HTTP 트랜잭션을 수행한다.
- 웹브라우저는 시각적으로 풍부한 웹페이지를 가져올 때 대량의 HTTP 트랜잭션을 수행한다.

## 메시지
- HTTP 메시지는 단순한 줄 단위의 문자열이다.
- 웹 클라이언트에서 웹 서버로 보낸 HTTP 메시지를 요청 메시지라고 한다.
- 서버에서 클라이언트로 가는 메시지는 응답메시지라고 한다.
- HTTP 메시지의 세부분
    - 시작줄
        - 메시지의 첫 줄은 시작줄로, 요청이라면 무엇을 해야 하는지 응답이라면 무슨일이 일어났는지 나타낸다.
    - 헤더
        - 시작죽 다음에는 0개 이상의 헤더 필드가 이어진다. 각 헤더 필드는 쉬운 구문분석을 위해 쌍점(:)으로 구분되어 있는 하나의 이름과 하나의 값으로 구성된다.
    - 본문
        - 빈 줄 다음에는 어떤 졸유의 데이터든 들어갈 수 있는 메시지 본문이 필요에 따라 올 수 있다.
        - 요청의 본문은 웹 서버로 데이터를 실어 보내며, 응답은 본문은 클라이언트로 데이터를 반환한다.
        - 문자열이며 구조적인 시작줄이나 헤더와 달리, 본문은 임의의 이진 데이터를 포함할 수 있다.
        - 물론 텍스트도 포함할 수 있다.

## TCP/IP
- HTTP는 애플리케이션 계층 프로토콜이다.
- HTTP는 네트워크 통신의 핵심적인 세부사항에 대해서 신경 쓰지 않는다.
- 대신 대중적이고 신뢰성 있는 인터넷 전송 프로토콜인 TCP/IP에게 맡긴다.
- TCP는 다음을 제공한다.
    - 오류 없는 데이터 전송
    - 순서에 맞는 전달
    - 조각나지 않는 데이터 스트림
- TCP/IP는 TCP와 IP가 층을 이루는, 패킷 교환 네트워크 포토콜의 집합이다.
- TCP/IP는 각 네트워크와 하드웨어의 특성을 숨기고, 어떤 종류의 컴퓨터나 네트워크든 서로 신뢰성 있는 의사소통을 하게 해 준다.
- HTTP 프로토콜은 TCP 위의 계층이다.
- HTTP는 자신의 메시지 데이터를 전송하기 위해 TCP를 사용한다.

## 접속, IP 주소 그리고 포트번호
- HTTP 클라이언트가 서버에 메시지를 전송할 수 있게 되기 전에, 인터넷 프로토콜 주소와 포트번호를 사용해 클라이언트와 서버 사이에 TCP/IP 커넥션을 맺어야 한다.
- TCP 커넥션을 맺는 것은 다른 회사 사무실에 있는 누군가에게 전화를 거는 것과 다소 비슷하다.
- TCP에서는 서버 컴퓨터에 대한 IP주소와 그 서버에서 실행 중인 프로그램이 사용중인 포트가 필요하다.

## HTTP를 이용하여 리소스를 주고 받는 과정
- 1. 웹 브라우저는 서버의 URL에서 호스트명을 추출한다.
- 2. 웹 브라우저는 서버의 호스트 명을 IP로 반환한다.
- 3. 웹 브라우저는 URL에서 포트번호를 추출한다.
- 4. 웹 브라우저는 웹 서버와 TCP 커넥션을 맺는다.
- 5. 웹 브라우저는 서버에 HTTP 요청을 보낸다.
- 6. 서버는 웹 브라우저에 HTTP 응답을 돌려준다.
- 7. 커넥션이 닫히면, 웹 브라우저는 문서를 보여준다.

## 프로토콜 버전
- HTTTP/0.9
    - HTTP/0.9는 오직 GET 메서드만 지원하고, 멀티미디어 콘텐츠에 대한 MIME타입이나, HTTP 헤더, 버전 번호는 지원하지 않는다.
    - 간단한 HTML 객체를 받아 오기 위해 만들어진 것이다.
- HTTTP/1.0
    - HTTP/1.0은 버전 번호, HTTP 헤더, 추가 메서드, 멀티미디어 객체 처리를 추가했다.
    - HTTP/1.0은 결코 잘 정의된 명세가 아닌다.
- HTTTP/1.0+
    - 오래 지속되는 “Keep-alive” 커넥션, 가상 호스팅 지원, 프락시 연결 지원을 포함해 많은 기능이 공식적이진 않지만 사실상 표준으로 HTTP에 추가 되었다.
- HTTTP/1.1
    - HTTP 설계의 구조적 결함 교정, 두드러진 성능 최적화, 잘못된 기능 제거에 집중했다.
    - HTTP/1.1은 현재의 HTTP 버전이다.
- HTTTP/2.0
    - HTTP/1.1 성능 문제를 개선하기 위해 구글의 SPDY 프로토콜을 기반으로 설계가 진행 중인 프로토콜이다.

## 웹의 구성요소
- 프락시
    - 클라이언트와 서버 사이엥 위치한 HTTP 중개자
- 캐시
    - 많이 찾는 웹페이지를 클라이언트 가까이에 보관하는 HTTP 창고
- 게이트웨이
    - 다른 애플리케이션과 연결된 특별한 웹 서버
- 터널
    - 단순히 HTTP 통신을 전달하기만 하는 특별한 프락시
- 에이전트
    - 자동화된 HTTP 요청을 만드는 준지능적 웹 클라이언트

## 프락시
- 웹 보안, 애플리케이션 통합, 성능 최적화를 위한 중요한 구성요소이다.
- 프락시는 클라이언트와 서버 사이에 위치하여, 클라이언트 모든 HTTP 요청을 받아 서버에 전달한다.
- 사용자를 대신해서 서버에 접근한다.
- 프락시는 주로 보안을 위해 사용된다. 즉, 모든 웹 트래픽 흐름 속에서 신뢰할 만한 중개자 역할을 한다.
- 또한 프락시는 요청과 응답을 필터링 한다.

## 캐시
- 웹 캐시와 캐시 프락시는 자신을 거쳐 가는 문서들 중 자주 찾는 것은 사본을 저장해 두는, 특별한 종류의 HTTP 프락시 서버다.
- HTTP는, 캐시를 효율적으로 동작하게 하고 캐시된 콘텐츠를 최신 버전으로 유지하면서 동시에 프라이버시도 보호하기 위한 많은 기능을 정의한다.

## 게이트 웨이
- 게이트웨이는 다른 서버들의 중개자로 동작하는 특별한 서버다.
- 게이트웨이는 주로 HTTP 트래픽을 다른 프로토콜로 변환하기 위해 사용된다.
- 스스로가 리소스를 갖고 있는 진짜 서버인 것처럼 요청을 다룬다. 클라이언트는 자신이이 게이트웨이와 통신하고 있음을 알아채지 못할 것이다.
- HTTP/FTP 게이트웨이는 FTP URI에 대한 HTTP 요청을 받아들인 뒤, FTP 프로토콜을 이용해 문서를 가져온다. 받아온 문서는 HTTP 메시지에 담겨 클라이언트에게 보낸다.

## 터널
- 터널은 두 커넥션 사이에 날 데이터를 열어보지 않고 그대로 전달해주는 HTTP 애플리케이션이다.
- HTTP 터널은 주로 비 HTTP 데이터를 하나 이상의 HTTP 연결을 통해 그대로 전해주기 위해 사용된다.
- HTTP 터널을 활용하는 대표적인 예로, 암호화된 SSL 트래픽을 HTTP 커넥션으로 전송함으로써 웹 트래픽만 허용하는 사내 방화벽을 통과시키는 것이다.
- HTTP/SSL 터널은 HTTP 요청을 받아들여 목적지의 주소와 포트번호로 커넥션을 맺는다. 이후부터는 암호화된 SSL 트래픽을 HTTP 채널을 통해 목적지 서버로 전할 수 있게 된다.

## 에이전트
- 사용자 에이전트는 사용자를 위해 HTTP 요청을 만들어주는 클라이언트 프로그램이다.
- 웹 요청을 만드는 애플리케이션은 뭐든 HTTP 에이전트다.
- 사용자 에이전트에는 여러 가지 종류가 있다.
    - ex) 스파이더, 웹 로봇

## 정리
- 1장은 내용들은 기존에 알고 있었지만 서버를 개발하면서 정확한 명칭들을 모르고 사용하고 있었다.
- HTTP에서 요청과 응답을 하나의 트랜잭션으로 묶어서 처리한다는걸 알게되었다. 또한 트랜잭션이라는 용어가 데이터베이스에만 종속적인 용어가 아니라는걸 알게 되었다.
- HTTP/SSL 터널이 HTTP 요청으로 처리할 수 있게 해준다면 HTTPS는 터널을 이용하고 있는걸까???
- URN을 사용하고 있는곳이 있을까?
- HTTP3.0은 UDP를 사용하면서 신뢰성을 보장할까???보장한다고 읽었던것 같다??!!

